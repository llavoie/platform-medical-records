<div ng-show="showPatientsView" class="row-fluid"><!------------------------  All Patients  ------------------------------------->
    <div class="span10 margin-after mrs">
        <div class="box-header">{{msg('data.provider.mrs.patients')}}</div>
        <div class="box-content inside clearfix">
            <div class="control-group">
                <a href="#/mrs/new" role="button" class="btn btn-primary"><i class="icon-plus icon-white"></i> {{msg('data.provider.mrs.add.patient')}}</a>
            </div>
            <h4>{{msg('data.provider.mrs.all.patients')}}</h4>
            <div class="control-group form-inline">
                <label >{{msg('data.provider.mrs.search.patient')}}</label>
                <input type="text" ng-model="query" ng-change="search()" class="input-medium search-query" placeholder="{{msg('data.provider.mrs.searchByIdOrName')}}">
            </div>
            <div class="margin-before">
                <table class="table table-condensed table-bordered table-striped table-lightblue table-mrs">
                    <thead>
                    <tr>
                        <th class="motechId" ng-click="sort_by('motechId')">
                            <img src=../mrs/img/trans.gif alt="{{msg('data.provider.mrs.sortingId')}}" title="{{msg('data.provider.mrs.sortingId')}}"
                                 class="sorting-no" />{{msg('data.provider.mrs.patient.lookupField.id')}} </a></th>
                        <th class="firstName" ng-click="sort_by('person.firstName')">
                            <img src=../mrs/img/trans.gif alt="{{msg('data.provider.mrs.sortingFirstName')}}" title="{{msg('data.provider.mrs.sortingFirstName')}}"
                                 class="sorting-no" />{{msg('data.provider.mrs.person.field.firstName')}} </th>
                        <th class="lastName" ng-click="sort_by('person.lastName')">
                            <img src=../mrs/img/trans.gif alt="{{msg('data.provider.mrs.sortingLastName')}}" title="{{msg('data.provider.mrs.sortingLastName')}}"
                                 class="sorting-no" />{{msg('data.provider.mrs.person.field.lastName')}} </th>
                        <th class="age" ng-click="setOrder('person.age')">
                            <img src=../mrs/img/trans.gif alt="{{msg('data.provider.mrs.sortingAge')}}" title="{{msg('data.provider.mrs.sortingAge')}}"
                                 class="sorting-no" />{{msg('data.provider.mrs.person.field.age')}} </th>
                        <th class="gender" ng-click="setOrder('person.gender')">
                            <img src=../mrs/img/trans.gif alt="{{msg('data.provider.mrs.sortingGender')}}" title="{{msg('data.provider.mrs.sortingGender')}}"
                                 class="sorting-no" />{{msg('data.provider.mrs.person.field.gender')}} </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-click="getPatient(patient.motechId)" ng-repeat="patient in pagedItems[currentPage] | orderBy:sortingOrder:reverse">
                        <!--motechId na Id zmienic!-->
                        <td>{{patient.motechId}}</td>
                        <td>{{patient.person.firstName}}</td>
                        <td>{{patient.person.lastName}}</td>
                        <td>{{patient.person.age}}</td>
                        <td>{{patient.person.gender}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="pagination pagination-centered pagination-condensed lightblue" ng-show="pagedItems.length &gt; 1">
                <ul>
                    <li ng-class="{disabled: currentPage == 0}"><a href ng-click="firstPage()">{{msg('pagination.first')}}</a></li>
                    <li ng-class="{disabled: currentPage == 0}"><a href ng-click="prevPage()">{{msg('pagination.prev')}}</a></li>
                    <li ng-repeat="number in range(pagedItems.length)"
                        ng-hide="hidePages(number)"
                        ng-class="{active: number == currentPage}"
                        ng-click="setPage()">
                        <a href ng-bind="number + 1">1</a>
                    </li>
                    <li ng-class="{disabled: currentPage == pagedItems.length - 1}"><a href ng-click="nextPage()">{{msg('pagination.next')}}</a></li>
                    <li ng-class="{disabled: currentPage == pagedItems.length - 1}"><a href ng-click="lastPage(pagedItems.length - 1)">{{msg('pagination.last')}}</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div ng-hide="selectedPatientView" class="row-fluid"><!------------------------  Patient  ------------------------------------->
    <div class="span10 margin-after mrs">
        <div class="box-header">{{msg('data.provider.mrs.patient')}}</div>
        <div class="box-content inside clearfix">
            <h4>{{msg('data.provider.mrs.patient.name')}} {{patientDto.person.firstName}} {{patientDto.person.lastName}}</h4>
            <a class="btn btn-primary" href="#/dashboard/"> {{msg('data.provider.mrs.button.back')}}</a>
            <div class="control-group clearfix">
                <span class="pull-right"><h5>{{msg('data.provider.mrs.patient.motechId')}} {{patientDto.motechId}}</h5></span>
            </div>

            <div class="details-panel">
                <div class="label-legend">{{msg('data.provider.mrs.patientDetails')}}</div>
                <div class="control-group inside pull-right">
                    <a class="btn btn-primary" href="#/mrs/{{patientDto.motechId}}/edit">{{msg('data.provider.mrs.edit.patientDetails')}}</a>
                </div>
                <table class="table table-lightblue table-patient">
                    <tbody>
                        <tr>
                            <td>{{msg('data.provider.mrs.person.field.firstName')}}</td>
                            <td>{{patientDto.person.firstName}}</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>{{msg('data.provider.mrs.person.field.middleName')}}</td>
                            <td>{{patientDto.person.middleName}}</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>{{msg('data.provider.mrs.person.field.lastName')}}</td>
                            <td>{{patientDto.person.lastName}}</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>{{msg('data.provider.mrs.person.field.preferredName')}}</td>
                            <td>{{patientDto.person.preferredName}}</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>{{msg('data.provider.mrs.person.field.address')}}</td>
                            <td>{{patientDto.person.address}}</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>{{msg('data.provider.mrs.person.field.gender')}}</td>
                            <td>{{patientDto.person.gender}}</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>{{msg('data.provider.mrs.person.field.dateOfBirth')}}</td>
                            <td>{{patientDto.person.dateOfBirth | date:'dd/MM/yyyy'}}</td>
                            <td><strong>{{msg('data.provider.mrs.person.field.birthDateEstimated')}}</strong> {{patientDto.person.birthDateEstimated}}</td>
                        </tr>
                        <tr>
                            <td>{{msg('data.provider.mrs.person.field.dead')}}</td>
                            <td>{{patientDto.person.dead}}</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>{{msg('data.provider.mrs.facility.field.facilityId')}}</td>
                            <td>{{patientDto.person.facilityId}}</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="details-panel margin-before3">
                <div class="label-legend">{{msg('data.provider.mrs.customAttributes')}}</div>
                <div class="control-group inside pull-right">
                    <a class="btn btn-primary" href="#/mrs/{{patientDto.motechId}}/editAttributes">{{msg('data.provider.mrs.edit.customAttributes')}}</a>
                </div>
                <table class="table table-lightblue table-patient">
                    <tbody>
                        <tr ng-repeat="attribute in patientDto.person.attributes">
                            <td>{{attribute.name}}</td>
                            <td>{{attribute.value}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
